<!DOCTYPE html>
<!-- saved from url=(0056)http://visjs.org/examples/network/edgeStyles/arrows.html -->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Network | Basic usage</title>

    <script type="text/javascript" src="./Network _ Basic usage_files/vis.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.js"></script>
    <link href="./Network _ Basic usage_files/vis-network.min.css" rel="stylesheet" type="text/css">

    <style type="text/css">
        #mynetwork {
            width: 600px;
            height: 400px;
            border: 1px solid lightgray;
        }
    </style>
</head>
<body>

<p>
    There are a lot of options with arrows! They can also be combined with dashed lines.
</p>

<div id="mynetwork">
    <div class="vis-network" tabindex="900"
         style="position: relative; overflow: hidden; touch-action: pan-y; user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); width: 100%; height: 100%;">
        <canvas width="600" height="400"
                style="position: relative; touch-action: none; user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); width: 100%; height: 100%;"></canvas>
    </div>
</div>

<script type="text/javascript">
    $.getJSON("http://localhost:8080/visualizer/get", function (data) {
        console.log(data)
        var actorIdMap = new Map();

        var nodes = new vis.DataSet();
        var edges = new vis.DataSet();

        var i = 1;
        data.exchs.forEach(function (exch) {
            console.log(exch);
            if (!actorIdMap.has(exch.sender)) {
                actorIdMap.set(exch.sender, i);
                nodes.add({id: i, label: exch.sender});
                i++;
            }

            exch.receiver.forEach(function (receiver) {
                if (!actorIdMap.has(receiver)) {
                    actorIdMap.set(receiver, i);
                    nodes.add({id: i, label: receiver/*.split("/").reverse()[0]*/});
                    i++;
                }
            });
        });

        console.log(nodes);
        console.log(actorIdMap);

        data.exchs.forEach(function (exch) {
            var senderId = actorIdMap.get(exch.sender);
            var name = exch.message.split("(")[0];

            exch.receiver.forEach(function (receiver) {
                var receiverId = actorIdMap.get(receiver);
                edges.add({from: senderId, to: receiverId, arrows: 'to', label: name});
            });
        });

//        edges.add({from: 2, to: 2, label: "DEINE NAME"});

        // create a network
        var container = document.getElementById('mynetwork');
        var data2 = {
            nodes: nodes,
            edges: edges
        };
        var options = {};
        var network = new vis.Network(container, data2, options);
    })
</script>


<div style="display: block; opacity: 1;"></div>
</body>
</html>