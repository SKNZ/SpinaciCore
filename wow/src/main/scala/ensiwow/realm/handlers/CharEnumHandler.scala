package ensiwow.realm.handlers

import ensiwow.realm.protocol.payloads._
import ensiwow.realm.protocol.{OpCodes, PayloadlessPacketHandler, PayloadlessPacketHandlerFactory}
import ensiwow.realm.session.NetworkWorker

import scodec.bits._

/**
  * Created by sknz on 3/15/17.
  */
class CharEnumHandler extends PayloadlessPacketHandler {

  val mockCharEnum = ServerCharEnum(Vector(
    ServerCharEnumEntry(0,
      CharInfo("JM", 0, 1, 4, 0, 6, 5, 7, 1),
      1, 0, 0, 0, 0, 0, 0, 0, 0, 0,
      Pet(0, 0, 0))))

  /**
    * Processes empty payload
    */
  override protected def process: Unit = {
    sender ! NetworkWorker.EventOutgoingRaw(
      hex"0208000000000000004761726C000104000808070604010C00000000000000F1B60BC6FB6101C3E335A7420000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009000000000000004761726D000104000006060006010C00000000000000A3CE0BC6F00B05C35A53A74200000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000".bits,
      OpCodes.SCharEnum
    )
    /*
    sender ! NetworkWorker.EventOutgoing(mockCharEnum)
    */
  }

}

object CharEnumHandler extends PayloadlessPacketHandlerFactory[CharEnumHandler](OpCodes.CharEnum)
